{"version":3,"sources":["app/api.ts","components/UserProvider.tsx","components/CartProvider.tsx","app/NavBar.tsx","components/loading.tsx","components/StoreList.tsx","components/StoreForm.tsx","components/LoginForm.tsx","components/HomePage.tsx","components/RegisterForm.tsx","components/ProductList.tsx","components/FamilySelect.tsx","components/ProductForm.tsx","components/UserForm.tsx","components/CartList.tsx","app/App.tsx","reportWebVitals.ts","index.tsx"],"names":["axios","defaults","baseURL","interceptors","request","use","config","token","window","localStorage","getItem","headers","Authorization","responseBody","response","status","data","responseListBody","requests","url","get","then","body","post","put","delete","api","Stores","list","details","id","create","store","update","Id","Sales","sale","SaleId","SalesDetails","salesDetail","SalesDetailId","Products","product","ProductId","Families","family","FamilyId","Users","current","user","Roles","role","addrole","Account","login","register","logout","Images","upload","file","formData","FormData","append","photo","userContextDefault","setUser","userRoles","setUserRoles","roles","setRoles","userToken","setToken","getCurrentUser","photos","userPhotos","UserContext","createContext","UserProvider","children","useState","setPhotos","setUserPhotos","setUserToken","useEffect","catch","err","console","log","uRoles","map","r","find","x","undefined","some","push","uPhotos","Photos","p","Provider","value","setItem","saleContextDefault","userSales","activeSale","setActiveSale","userSalesDetails","setUserSalesDetails","activeSalesDetails","setActiveSalesDetails","products","setProducts","families","cartProducts","fillUserSales","fillCartProducts","fillUserSalesDetails","fillActiveSalesDetails","clearCart","CartContext","CartProvider","userCtx","React","useContext","sales","setSales","salesDetails","setSalesDetails","setUserSales","setFamilies","setcartProducts","newSale","SaleDocNum","Store","POSNum","POSUser","Paid","uSales","length","s","unpaidSale","activeUserSale","createSale","saleDetail","d","Product","ProductName","detail","sd","NavBar","cartCtx","activeItem","setActiveItem","handleClick","event","target","name","Menu","pointing","secondary","Container","Item","as","NavLink","to","exact","header","active","onClick","Icon","size","color","Header","Name","position","disabled","Label","floating","circular","Image","src","IsMain","Url","avatar","UserName","style","marginLeft","Loading","inverted","content","Dimmer","Loader","StoreList","setTarget","stores","setStores","submiting","setSubmiting","Card","Group","Content","StoreName","Meta","StoreAddress","Description","Active","extra","className","Button","Link","loading","e","currentTarget","filter","handleDeleteStore","Divider","horizontal","centered","positive","StoreForm","history","useHistory","useParams","Pos","Stocks","setStore","handleInputChange","Grid","columns","Column","Form","onSubmit","editStore","Input","required","placeholder","onChange","Checkbox","label","checked","type","LoginForm","Email","Password","error","setError","a","appUser","Token","Message","toString","HomePage","block","RegisterForm","ProductList","setSelectedProduct","newSalesDetail","Seq","Quantity","UnitPrice","LineTotal","handleAddToCart","tempSalesDetail","addSalesDetail","Barcode","QuantityPerUnit","UnitMeasure","Discontinued","floated","width","f","FamilyName","handleDeleteProduct","FamilySelect","currentFamily","setCurrentFamily","familyToAdd","setFamilyToAdd","Field","control","Segment","ProductForm","setProduct","editProduct","UserForm","PhoneNumber","Address","City","newRole","setRole","selectedFile","setSelectedFile","addRole","roleFromEvent","removeRole","updatePhoto","newUser","result","addPhoto","PublicId","UserId","editUser","Row","Subheader","rounded","oldPhoto","newPhoto","setMainImage","deleteImage","files","uploadPhoto","marginTop","CartList","totalProducts","setTotalProducts","totalPrice","setTotalPrice","addProduct","updateSalesDetail","removeProduct","price","fluid","negative","App","setLoading","removeItem","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f9688d0f.chunk.js","sourcesContent":["import axios, { AxiosResponse } from 'axios';\r\nimport { Family } from '../models/family';\r\nimport { Photo, UploadResult } from '../models/photo';\r\nimport { Product } from '../models/product';\r\nimport { Sale } from '../models/sale';\r\nimport { SalesDetail } from '../models/salesdetail';\r\nimport { Store } from '../models/store';\r\nimport { Role, RoleDto, User, UserDto } from '../models/user';\r\n\r\nconst sleep=(delay: number)=>{\r\n    return new Promise((resolve)=>{\r\n        setTimeout(resolve, delay)\r\n    })\r\n}\r\n\r\n//axios.defaults.baseURL=process.env.REACT_APP_API_URL;\r\naxios.defaults.baseURL=\"/api\"\r\n//axios.defaults.baseURL=\"http://localhost:5000/api\"\r\naxios.interceptors.request.use(config => {\r\n    const token = window.localStorage.getItem('jwt');\r\n    if(token) config.headers.Authorization = `Bearer ${token}`;\r\n    return config;\r\n})\r\n// axios.interceptors.response.use(async response=>{\r\n//     try {\r\n//         await sleep(1000);\r\n//         return response;\r\n//     } catch (error) {\r\n//         console.log(error);\r\n//         return await Promise.reject(error);\r\n//     }\r\n// })\r\nconst responseBody=<T>(response: AxiosResponse<T>)=>{if(response.status < 300) {return response.data} else {return null}};\r\nconst responseListBody=<T>(response: AxiosResponse<T>)=>{if(response.status < 300) {return response.data} else {return []}};\r\nconst requests={\r\n    get: <T> (url: string)=> axios.get<T>(url).then(responseBody),\r\n    getList: <T> (url: string)=> axios.get<T>(url).then(responseListBody),\r\n    post: <T> (url: string, body: {})=> axios.post<T>(url, body).then(responseBody),\r\n    put: <T> (url: string, body: {})=> axios.put<T>(url, body).then(responseBody),\r\n    del: <T> (url: string)=> axios.delete<T>(url).then(responseBody),\r\n}\r\nconst Stores={\r\n    list: ()=>requests.getList<Store[]>('/store'),\r\n    details: (id: string)=>requests.get<Store>(`/store/${id}`),\r\n    create: (store: Store)=>requests.post<Store>('/store', store),\r\n    update: (store: Store)=>requests.put<Store>(`/store/${store.Id}`, store),\r\n    delete: (id: string)=>requests.del<Store>(`/store/${id}`)\r\n}\r\nconst Sales={\r\n    list: ()=>requests.getList<Sale[]>('/sale'),\r\n    details: (id: string)=>requests.get<Sale>(`/sale/${id}`),\r\n    create: (sale: Sale)=>requests.post<Sale>('/sale', sale),\r\n    update: (sale: Sale)=>requests.put<Sale>(`/sale/${sale.SaleId}`, sale),\r\n    delete: (id: string)=>requests.del<Sale>(`/sale/${id}`)\r\n}\r\nconst SalesDetails={\r\n    list: ()=>requests.getList<SalesDetail[]>('/salesdetail'),\r\n    details: (id: string)=>requests.get<SalesDetail>(`/salesdetail/${id}`),\r\n    create: (salesDetail: SalesDetail)=>requests.post<SalesDetail>('/salesdetail', salesDetail),\r\n    update: (salesDetail: SalesDetail)=>requests.put<SalesDetail>(`/salesdetail/${salesDetail.SalesDetailId}`, salesDetail),\r\n    delete: (id: string)=>requests.del<SalesDetail>(`/salesdetail/${id}`)\r\n}\r\nconst Products={\r\n    list: ()=>requests.getList<Product[]>('/product'),\r\n    details: (id: string)=>requests.get<Product>(`/product/${id}`),\r\n    create: (product: Product)=>requests.post<Product>('/product', product),\r\n    update: (product: Product)=>requests.put<Product>(`/product/${product.ProductId}`, product),\r\n    delete: (id: string)=>requests.del<Product>(`/product/${id}`)\r\n}\r\nconst Families={\r\n    list: ()=>requests.getList<Family[]>('/family'),\r\n    details: (id: string)=>requests.get<Family>(`/family/${id}`),\r\n    create: (family: Family)=>requests.post<Family>('/family', family),\r\n    update: (family: Family)=>requests.put<Family>(`/family/${family.FamilyId}`, family),\r\n    delete: (id: string)=>requests.del<Family>(`/family/${id}`)\r\n}\r\nconst Users={\r\n    //list: ()=>requests.getList<User[]>('/user'),\r\n    current: ()=>requests.get<User>('/user'),\r\n    details: (id: string)=>requests.get<User>(`/user/${id}`),\r\n    create: (user: User)=>requests.post<User>('/user', user),\r\n    update: (user: User)=>requests.put<User>(`/user/${user.Id}`, user),\r\n    delete: (id: string)=>requests.del<User>(`/user/${id}`)\r\n}\r\nconst Roles={\r\n    list: ()=>requests.getList<Role[]>('/user/role'),\r\n    details: (id: string)=>requests.get<Role>(`/user/role/${id}`),\r\n    create: (role: RoleDto)=>requests.post<Role>('/user/role', role),\r\n    addrole: (id: string, role: Role)=>requests.post<User>(`/user/role/${id}`, role),\r\n    delete: (id: string)=>requests.del<Role>(`/user/role/${id}`)\r\n}\r\nconst Account={\r\n    current: ()=>requests.get<User>('/account'),\r\n    login: (user: UserDto)=>requests.post<User>('/login', user),\r\n    register: (user: UserDto)=>requests.post<User>('/register', user),\r\n    logout: ()=>requests.get('/logout')\r\n}\r\nconst Images={\r\n    upload: (file: Blob) => {\r\n        let formData = new FormData();\r\n        formData.append('File', file);\r\n        return axios.post<UploadResult>('/photo/add', formData, {\r\n            headers: {'Content-type': 'multipart/form-data'}\r\n        })\r\n    },\r\n    list: ()=>requests.getList<Photo[]>('/photo'),\r\n    details: (id: string)=>requests.get<Photo>(`/photo/${id}`),\r\n    create: (photo: Photo)=>requests.post<Photo>('/photo', photo),\r\n    update: (photo: Photo)=>requests.put<Photo>(`/photo/${photo.Id}`, photo),\r\n    delete: (id: string)=>requests.del<Photo>(`/photo/${id}`)\r\n}\r\nconst api={\r\n    Stores,\r\n    Sales,\r\n    SalesDetails,\r\n    Products,\r\n    Families,\r\n    Users,\r\n    Roles,\r\n    Account,\r\n    Images\r\n}\r\nexport default api;","import React, { createContext, useEffect, useState } from \"react\";\r\nimport { setTokenSourceMapRange } from \"typescript\";\r\nimport api from \"../app/api\";\r\nimport { Photo } from \"../models/photo\";\r\nimport { Role, User, UserContextType } from \"../models/user\";\r\n\r\nconst userContextDefault: UserContextType = {\r\n    user: null,\r\n    setUser: null,\r\n    userRoles: [],\r\n    setUserRoles: null,\r\n    roles: [],\r\n    setRoles: null,\r\n    userToken: null,\r\n    setToken: null,\r\n    getCurrentUser: null,\r\n    photos: [],\r\n    userPhotos: []\r\n}\r\n\r\nexport const UserContext=createContext<UserContextType>(userContextDefault);\r\n\r\ninterface Props{\r\n    children: React.ReactNode;\r\n}\r\n\r\nexport default function UserProvider({children}: Props){\r\n    const [user, setUser] = useState<User|null>(null);\r\n    const [roles, setRoles]=useState<Role[]>([]);\r\n    const [userRoles, setUserRoles] = useState<Role[]>([]);\r\n    const [photos, setPhotos] = useState<Photo[]>([]);\r\n    const [userPhotos, setUserPhotos] = useState<Photo[]>([]);\r\n    const [userToken, setUserToken] = useState<string|null>(window.localStorage.getItem('jwt'))\r\n    useEffect(()=>{\r\n        api.Roles.list().then(response => {\r\n            if(response!==null) setRoles(response);\r\n        }).catch((err)=>{\r\n            console.log(err);\r\n        });\r\n    }, [])\r\n    useEffect(()=>{\r\n        api.Images.list().then(response => {\r\n            if(response!==null) setPhotos(response);\r\n        }).catch((err)=>{\r\n            console.log(err);\r\n        });\r\n    }, [])\r\n    useEffect(()=>{\r\n        const uRoles: Role[] = []\r\n        user?.Roles.map(r=>{\r\n            const role = roles.find(x=>x.Id === r);\r\n            if(role !== undefined && !uRoles.some(x=>x.Id === r)) {\r\n                uRoles.push(role);\r\n            }\r\n        });\r\n        setUserRoles(uRoles);\r\n    }, [user, roles])\r\n    useEffect(()=>{\r\n        const uPhotos: Photo[] = []\r\n        user?.Photos.map(p=>{\r\n            const photo = photos.find(x=>x.Id === p.Id);\r\n            if(photo !== undefined && !userPhotos.some(x=>x.Id === p.Id)) {\r\n                uPhotos.push(photo);\r\n            }\r\n        });\r\n        setUserPhotos(uPhotos);\r\n    }, [user, photos])\r\n    // It's just a test:\r\n    // useEffect(() => {\r\n        //  fetch('https://localhost:49153/api/account',\r\n        // {method: 'GET',\r\n        // cache: 'no-cache',\r\n        // headers: {\r\n        //     'Content-Type': 'application/json'\r\n        // }\r\n        // })\r\n        // .then((response) => {\r\n        //     console.log(response);\r\n        //     let resp = JSON.stringify(response);\r\n        //     return JSON.parse(resp);\r\n        //     // return response.json();\r\n        // })\r\n        // .then((data) => {\r\n        //     console.log(data);\r\n        //     setUser(data);\r\n        // })\r\n    //     getCurrentUser();\r\n    //   }, [user])\r\n\r\n    // async function getCurrentUser(){\r\n    //     await api.Account.current()\r\n    //     .then(response => {\r\n    //         console.log(response);\r\n    //         setUser(response);\r\n    //     })\r\n    //     .catch((err)=>{\r\n    //         console.log(err);\r\n    //     });\r\n    // }\r\n\r\n    function getCurrentUser(){\r\n        if(userToken !== null){\r\n            console.log('Trying to get user ...');    \r\n            api.Users.current()\r\n                .then(response => {\r\n                    console.log(response);\r\n                    setUser(response);\r\n                })\r\n                .catch((err)=>{\r\n                    console.log(err);\r\n                });\r\n            }\r\n        }\r\n\r\n    function setToken(token: string){\r\n        if(token) {\r\n            window.localStorage.setItem('jwt', token);\r\n            setUserToken(token);\r\n        }\r\n    }\r\n\r\n    return(\r\n        <UserContext.Provider value={{\r\n            user, setUser, \r\n            userRoles, setUserRoles, \r\n            roles, setRoles, \r\n            userToken, setToken, \r\n            getCurrentUser,\r\n            photos, userPhotos}}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    );\r\n}","import React, { createContext, useEffect, useState } from \"react\";\r\nimport api from \"../app/api\";\r\nimport { Family } from \"../models/family\";\r\nimport { Product } from \"../models/product\";\r\nimport { Sale, SaleContext } from \"../models/sale\";\r\nimport { SalesDetail } from \"../models/salesdetail\";\r\nimport { UserContext } from \"./UserProvider\";\r\n\r\nconst saleContextDefault: SaleContext = {\r\n    userSales: [],\r\n    activeSale: null,\r\n    setActiveSale: null,\r\n    userSalesDetails: [],\r\n    setUserSalesDetails: null,\r\n    activeSalesDetails: [],\r\n    setActiveSalesDetails: null,\r\n    products: [],\r\n    setProducts: null,\r\n    families: [],\r\n    cartProducts: [],\r\n    fillUserSales: null,\r\n    fillCartProducts: null,\r\n    fillUserSalesDetails: null,\r\n    fillActiveSalesDetails: null,\r\n    clearCart: null\r\n}\r\n\r\nexport const CartContext=createContext<SaleContext>(saleContextDefault);\r\n\r\ninterface Props{\r\n    children: React.ReactNode;\r\n}\r\n\r\nexport default function CartProvider({children}: Props){\r\n    const userCtx=React.useContext(UserContext);\r\n    const [sales, setSales] = useState<Sale[]|null>(null);\r\n    const [salesDetails, setSalesDetails] = useState<SalesDetail[]|null>(null);\r\n    const [userSales, setUserSales] = useState<Sale[]>([]);\r\n    const [products, setProducts]=useState<Product[]>([]);\r\n    const [families, setFamilies]=useState<Family[]>([]);\r\n    const [cartProducts, setcartProducts]=useState<Product[]>([]);\r\n    const newSale={\r\n        SaleId: '',\r\n        SaleDocNum: '',\r\n        Store: '',\r\n        POSNum: '',\r\n        POSUser: userCtx.user ? userCtx.user.Id : '',\r\n        Paid: false,\r\n        SalesDetails: [],\r\n    }\r\n    const [activeSale, setActiveSale] = useState<Sale>(newSale);\r\n    const [userSalesDetails, setUserSalesDetails]=useState<SalesDetail[]>([]);\r\n    const [activeSalesDetails, setActiveSalesDetails]=useState<SalesDetail[]>([]);\r\n\r\n    useEffect(() => {\r\n        fillSales();\r\n        fillSalesDetails();\r\n        fillProducts();\r\n        fillFamilies();\r\n        }, []);\r\n\r\n    useEffect(()=>{\r\n        fillUserSales();\r\n    }, [userCtx.user])\r\n\r\n    useEffect(()=>{\r\n        fillCartProducts();\r\n        fillActiveSalesDetails();\r\n    }, [activeSale])\r\n\r\n    useEffect(()=>{\r\n        fillUserSalesDetails();        \r\n    }, [userSales])\r\n\r\n    function fillSales(){\r\n        api.Sales.list().then(response => {\r\n            setSales(response);\r\n          })\r\n          .catch((err)=>{\r\n              console.log(err);\r\n          });\r\n    }\r\n\r\n    function fillSalesDetails(){     \r\n        api.SalesDetails.list().then(response => {\r\n            setSalesDetails(response);\r\n          })\r\n          .catch((err)=>{\r\n              console.log(err);\r\n          });\r\n    }\r\n\r\n    function fillProducts(){\r\n        api.Products.list().then(response => {\r\n            setProducts(response);\r\n          }).catch((err)=>{\r\n              console.log(err);\r\n          });\r\n    }\r\n\r\n    function fillFamilies(){\r\n        api.Families.list().then(response => {\r\n            setFamilies(response);\r\n          }).catch((err)=>{\r\n              console.log(err);\r\n          });\r\n    }\r\n\r\n    function fillUserSales(){\r\n        const uSales = userCtx.user?.Sales;\r\n        if(userCtx.user!==null && uSales !== undefined){\r\n            setUserSales(uSales);\r\n            console.log('user sales updated');\r\n            if(uSales.length>0 && uSales.some((s)=>s.Paid===false)){\r\n                const unpaidSale = uSales.find((s)=>s.Paid===false);\r\n                const activeUserSale = sales?.find(s=>s.SaleId === unpaidSale?.SaleId)\r\n                if(activeUserSale!==undefined){\r\n                    setActiveSale(activeUserSale);\r\n                    console.log('active sale updated');\r\n                }\r\n            } else{\r\n                if(userCtx.user!==null){\r\n                    createSale(newSale);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function fillUserSalesDetails(){\r\n        if(userSales.length >0){\r\n            console.log('userSale count '+ userSales.length);\r\n            // if(userSalesDetails.length > 0){\r\n            //     setUserSalesDetails([]);\r\n            //     console.log(\"User Sales Details Cleared\");\r\n            // }\r\n            userSales.map(s=>{\r\n                const saleDetail = salesDetails?.find(d=>d.SaleId === s.SaleId);\r\n                console.log('Product found in User order: ' + saleDetail?.Product);\r\n                if(saleDetail !== undefined && !userSalesDetails.some(d => d.SalesDetailId === saleDetail.SalesDetailId)){\r\n                    setUserSalesDetails([...userSalesDetails, saleDetail]);\r\n                    console.log(\"User Sale Detail updated\")\r\n                } \r\n            })\r\n        }\r\n    }\r\n\r\n    function fillCartProducts(){\r\n        if(activeSale?.SalesDetails !== []){\r\n            // if(cartProducts.length > 0){\r\n            //     setcartProducts([]);\r\n            // }\r\n            activeSale?.SalesDetails.map(d=>{\r\n                const product = products.find(p=>p.ProductId === d.Product);\r\n                console.log('Product in Cart:' + product?.ProductName)\r\n                if(product !== undefined && !cartProducts.some(p=>p.ProductId === product.ProductId)){\r\n                    setcartProducts([...cartProducts, product]);\r\n                    console.log('cart products updated');\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    function fillActiveSalesDetails(){\r\n        if(activeSale.SalesDetails.length >0){\r\n            // if(activeSalesDetails.length > 0){\r\n            //     setActiveSalesDetails([]);\r\n            //     console.log(\"Active Sales Details Cleared\");\r\n            // }\r\n            activeSale.SalesDetails.map(d => {\r\n                const detail = salesDetails?.find(sd => sd.SalesDetailId === d.SalesDetailId);\r\n                if(detail !== undefined && !activeSalesDetails.some(d => d.SalesDetailId === detail.SalesDetailId)){\r\n                    setActiveSalesDetails([...activeSalesDetails, detail]);\r\n                    console.log(`active cart product details with id: ${detail.Product} updated`);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    function createSale(sale: Sale){\r\n        try{\r\n            api.Sales.create(sale)\r\n            .then((response)=>{\r\n                if(response!==null){\r\n                    setActiveSale(response);\r\n                }\r\n            });\r\n        } catch (err: any){\r\n            console.log(err);\r\n        }  \r\n    }\r\n\r\n    function clearCart(){\r\n        setUserSales([]);\r\n        setcartProducts([]);\r\n        setActiveSale(newSale);\r\n        setUserSalesDetails([]);\r\n        setActiveSalesDetails([]);\r\n    }\r\n\r\n    return(\r\n        <CartContext.Provider value={{\r\n            userSales, activeSale, setActiveSale, \r\n            userSalesDetails, setUserSalesDetails,\r\n            activeSalesDetails, setActiveSalesDetails, \r\n            products, setProducts, \r\n            families, cartProducts, \r\n            fillUserSales, fillCartProducts,\r\n            fillUserSalesDetails,\r\n            fillActiveSalesDetails,\r\n            clearCart}}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n}","import React, {MouseEvent, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Container, Header, Icon, Label, Menu, Image } from \"semantic-ui-react\";\r\nimport { CartContext } from \"../components/CartProvider\";\r\nimport { UserContext } from \"../components/UserProvider\";\r\n\r\ninterface Props{\r\n    logout: ()=>void;\r\n}\r\n\r\nexport default function NavBar({logout}: Props){\r\n    const userCtx=React.useContext(UserContext);\r\n    const cartCtx=React.useContext(CartContext);\r\n    const [activeItem, setActiveItem] = useState<string>('home');\r\n\r\n    function handleClick(event: MouseEvent){\r\n        console.log(event);\r\n        const target=event.target as HTMLAnchorElement;\r\n        setActiveItem(target.name);\r\n    }\r\n    return(\r\n        <Menu pointing secondary>\r\n            <Container>\r\n                <Menu.Item as={NavLink} to='/' exact header name='home'\r\n                    active={activeItem === 'home'} onClick={handleClick}>\r\n                    <Icon name='sun' size='big' color='orange'/>\r\n                    {/* <img src=\"/assets/logo.png\" alt=\"logo\" style={{marginRight:\"10px\"}}/> */}\r\n                    <Header as='h3' color='orange'>Garden Shop</Header>\r\n                </Menu.Item>\r\n                {userCtx.userRoles.some((r)=>r.Name === \"admin\")?\r\n                <Menu.Item as={NavLink} to='/store' name='stores' \r\n                    active={activeItem === 'stores'} onClick={handleClick}/>:\r\n                <></>}\r\n                <Menu.Item as={NavLink} to='/product' name='products' \r\n                    active={activeItem === 'products'} onClick={handleClick}/>\r\n                <Menu.Menu position='right'>\r\n                    <Menu.Item as={NavLink} to={`/cartlist/${cartCtx.activeSale?.SaleId}`} name='cartlist' onClick={handleClick}>\r\n                        <Icon disabled={userCtx.user === null} name='cart' size='large' onClick={handleClick}/>\r\n                        {cartCtx.cartProducts.length != 0 ? <Label color='red' floating circular>{cartCtx.cartProducts.length}</Label>:<></>}\r\n                    </Menu.Item>\r\n                    {(userCtx.user !== null)?\r\n                    <>\r\n                    <Menu.Item as={NavLink} to={`/edituser/${userCtx.user.Id}`} name='setting' onClick={handleClick}>\r\n                    {userCtx.userPhotos.length > 0 ? <Image src={userCtx.userPhotos.find(p => p.IsMain)?.Url} avatar />:<></>}\r\n                    {userCtx.user.UserName}\r\n                    <Icon name='setting' size='large' style={{marginLeft:\"10px\"}} />\r\n                    </Menu.Item>\r\n                    <Menu.Item\r\n                        name='logout'\r\n                        active={activeItem === 'logout'}\r\n                        onClick={logout}\r\n                        />\r\n                    </>: <>\r\n                    <Menu.Item as={NavLink} to='/login'\r\n                        name='login'\r\n                        active={activeItem === 'login'} onClick={handleClick}/>\r\n                    <Menu.Item as={NavLink} to='/register'\r\n                        name='register'\r\n                        active={activeItem === 'register'} onClick={handleClick}/>\r\n                        </>} \r\n                </Menu.Menu>\r\n            </Container>\r\n        </Menu>\r\n    )\r\n}","import React from 'react';\r\nimport { Dimmer, Loader } from 'semantic-ui-react';\r\n\r\ninterface Props{\r\n    inverted?: boolean;\r\n    content?: string;\r\n}\r\n\r\nexport default function Loading({inverted=true, content='Loading...'}: Props){\r\n    return(\r\n        <Dimmer active={true} inverted={inverted}>\r\n            <Loader content={content}/>\r\n        </Dimmer>\r\n    )\r\n}","import React, { SyntheticEvent, useEffect, useState } from \"react\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport { Button, Card, Divider, Header, Icon } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { Store } from \"../models/store\";\r\nimport { UserContext } from \"./UserProvider\";\r\n\r\nexport default function StoreList() {\r\n    const userCtx=React.useContext(UserContext);\r\n    const [target, setTarget] = useState('');\r\n    const [stores, setStores]=useState<Store[]>([]);\r\n    const [selectedStore, setSelectedStore]=useState<Store|undefined>(undefined);\r\n    const [submiting, setSubmiting]=useState(false);\r\n    useEffect(() => {\r\n        api.Stores.list().then(response => {\r\n          console.log(response);\r\n          setStores(response);\r\n        })\r\n      }, [])\r\n    function handleDeleteStore(e: SyntheticEvent<HTMLButtonElement>, id:string){\r\n        setTarget(e.currentTarget.name);\r\n        setSubmiting(true);\r\n        api.Stores.delete(id).then(()=>{\r\n        setStores([...stores.filter(s=>s.Id !== id)]);\r\n        setSubmiting(false);\r\n        });\r\n    }\r\n      \r\n    return(\r\n        <>\r\n            <Header as='h1'>Our stores</Header>\r\n            <Card.Group>\r\n                {stores.map(store => (\r\n                    <Card key={store.Id}>\r\n                    <Card.Content>\r\n                        {/* <Image\r\n                        floated='right'\r\n                        size='mini'\r\n                        src='https://react.semantic-ui.com/images/avatar/large/steve.jpg'\r\n                        /> */}\r\n                        <Card.Header>{store.StoreName}</Card.Header>\r\n                        <Card.Meta>{store.StoreAddress}</Card.Meta>\r\n                        <Card.Description>\r\n                        The store is <strong>{store.Active ? \"Active\" : \"Inactive\" }</strong>\r\n                        </Card.Description>\r\n                    </Card.Content>\r\n                    <Card.Content extra>\r\n                        <div className='ui three buttons'>\r\n                        <Button color='yellow'>\r\n                            View Stock\r\n                        </Button>\r\n                        <Button as={Link} to={`/editstore/${store.Id}`} color='green'>\r\n                            Edit\r\n                        </Button>\r\n                        <Button name={store.Id} loading={submiting && target === store.Id} onClick={(e)=>handleDeleteStore(e,store.Id)} color='orange'>\r\n                            Delete\r\n                        </Button>\r\n                        </div>\r\n                    </Card.Content>\r\n                    </Card>\r\n                ))}\r\n            </Card.Group>\r\n            {userCtx.userRoles.some((r)=>r.Name === \"admin\")?\r\n            <>\r\n            <Divider horizontal>\r\n                <Header as='h4'>\r\n                    <Icon name='edit outline' />\r\n                    New Store\r\n                </Header>\r\n            </Divider>\r\n            <Card.Group centered>\r\n                <Button as={NavLink} to='/newstore' positive content='Create Store'/>\r\n            </Card.Group>\r\n            </>:<></>\r\n            }\r\n        </>\r\n)}","import React, { ChangeEvent, useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router\";\r\nimport { Button, Form, Grid, Header } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { Store } from \"../models/store\";\r\n\r\nexport default function StoreForm(){\r\n    const history = useHistory();\r\n    const {id} = useParams<{id: string}>();\r\n    const initialState={\r\n        Id: '',\r\n        StoreName: '',\r\n        StoreAddress: '',\r\n        Active: false,\r\n        Pos: [],\r\n        Stocks: [],\r\n    }\r\n    const [store, setStore]=useState<Store>(initialState);\r\n    const [submiting, setSubmiting]=useState(false);\r\n    useEffect(()=>{\r\n        if(id){\r\n            api.Stores.details(id).then(response => {\r\n                if(response!==null) setStore(response);\r\n            }).catch((err)=>{\r\n                console.log(err);\r\n            });\r\n        };\r\n    }, [id])\r\n\r\n    function handleSubmit(){\r\n        editStore(store);\r\n    }\r\n    function handleInputChange(event: ChangeEvent<HTMLInputElement>){\r\n        const {name, value}=event.target;\r\n        setStore({...store, [name]: value})\r\n    }\r\n    function toggleActive(){\r\n        setStore({...store, Active: !store.Active})\r\n    }\r\n    function editStore(store: Store){\r\n        setSubmiting(true);\r\n        if (store.Id){\r\n          api.Stores.update(store).then(()=>{\r\n            history.push('/store');\r\n          })\r\n        } else {\r\n          api.Stores.create(store).then(()=>{\r\n            history.push('/store');\r\n          })\r\n        }\r\n        setStore(store);\r\n        setSubmiting(false);   \r\n    }\r\n    function closeForm(){\r\n        history.push('/store');\r\n    }\r\n    return(\r\n        <>\r\n            <Grid centered columns={2}>\r\n                <Grid.Column>\r\n                    <Header as='h2'>New store</Header>\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Input required placeholder='Store Name' value={store.StoreName || ''} name='StoreName' onChange={handleInputChange}/>\r\n                        <Form.Input required placeholder='Store Address' value={store.StoreAddress || ''} name='StoreAddress' onChange={handleInputChange}/>\r\n                        <Form.Checkbox label='Active' checked={store.Active || false} name='Active' onChange={toggleActive}/>\r\n                        <Button loading={submiting} positive type='submit'>Submit</Button>\r\n                        <Button onClick={closeForm} type='button'>Cancel</Button>\r\n                    </Form>\r\n                </Grid.Column>\r\n            </Grid>\r\n        </>\r\n    )\r\n}","import axios from \"axios\";\r\nimport React, { ChangeEvent, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Button, Form, Grid, Header, Message } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { UserDto } from \"../models/user\";\r\nimport { UserContext } from \"./UserProvider\";\r\n\r\nexport default function LoginForm(){\r\n    const userCtx=React.useContext(UserContext);\r\n    const history = useHistory();\r\n    const initialState= {\r\n        UserName: '',\r\n        Email: '',\r\n        Password: ''\r\n    }\r\n    const [user, setUser]=useState(initialState);\r\n    const [submiting, setSubmiting]=useState(false);\r\n    const [error, setError]=useState(\"\");\r\n    function handleInputChange(event: ChangeEvent<HTMLInputElement>){\r\n        const {name, value}=event.target;\r\n        setUser({...user, [name]: value})\r\n    }\r\n    function handleSubmit(){\r\n        setSubmiting(true);\r\n        login(user);\r\n    }\r\n\r\n    async function login(user: UserDto){\r\n        try{\r\n        const appUser = await api.Account.login(user);\r\n          console.log(appUser);\r\n          userCtx.setUser(appUser);\r\n          userCtx.setToken(appUser?.Token);\r\n          setSubmiting(false);\r\n          history.push('/');\r\n        } catch(err: any){\r\n            console.log(err);\r\n            setError(err);\r\n            setSubmiting(false);\r\n        };\r\n        // It should work, but it doesn't :((\r\n        // try {\r\n        //     const response = await axios.post('https://localhost:49154/api/login', user);\r\n        //     console.log(response);\r\n        //     setSubmiting(false);\r\n        //     history.push('/');\r\n        // } catch (err: any) {\r\n        //     console.error(err);\r\n        //     setError(err);\r\n        //     setSubmiting(false);\r\n        // }\r\n        // It's just a test:\r\n    //     async function myFetch() {\r\n    //         let response = await fetch('https://localhost:49154/api/login', {\r\n    //             method: 'POST',\r\n    //             headers: {\r\n    //               'Content-Type': 'application/json;charset=utf-8'\r\n    //             },\r\n    //             body: JSON.stringify(user)\r\n    //         });\r\n    //         if (!response.ok) {\r\n    //           throw new Error(`HTTP error! status: ${response.status}`);\r\n    //         } else {\r\n    //           return await response.json();\r\n    //         }\r\n    //     }\r\n    //     myFetch().then((result) => {\r\n    //         console.log(result);\r\n    //         setSubmiting(false);\r\n    //         history.push('/');\r\n    //     }).catch(e => {\r\n    //         console.log(e);\r\n    //         setError(e);\r\n    //         setSubmiting(false);\r\n    //     });  \r\n    }\r\n\r\n    function closeForm(){\r\n        history.push('/');\r\n    }\r\n      \r\n    return(\r\n        <>\r\n        <Grid centered columns={2}>\r\n            <Grid.Column>\r\n                <Header as='h2'>Login</Header>\r\n                <Form onSubmit={handleSubmit} error={error?true:false}>\r\n                    <Form.Input required placeholder='User Name' value={user.UserName || ''} name='UserName' onChange={handleInputChange}/>\r\n                    <Form.Input required placeholder='Email' value={user.Email || ''} name='Email' onChange={handleInputChange}/>\r\n                    <Form.Input required type='password' placeholder='Password' value={user.Password || ''} name='Password' onChange={handleInputChange}/>\r\n                    <Button loading={submiting} positive type='submit'>Login</Button>\r\n                    <Button onClick={closeForm} type='button'>Cancel</Button>\r\n                    <Message\r\n                        error\r\n                        content={error.toString()}\r\n                    />\r\n                </Form>\r\n            </Grid.Column>\r\n        </Grid>\r\n        </>\r\n    );\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Container, Header } from \"semantic-ui-react\";\r\nimport { UserContext } from \"./UserProvider\";\r\n\r\nexport default function HomePage(){\r\n    const userCtx=React.useContext(UserContext);\r\n    return(\r\n        <Container>\r\n            <Header as='h2'>Home page</Header>\r\n            \r\n            <Header as='h4' block>\r\n                {(userCtx.user === null)?\r\n                <p>Welcome to my Garden shop!\r\n                Please <Link to='/login'>login</Link> to buy something. </p>\r\n                :\r\n                <p><strong>{userCtx.user.UserName}</strong>, welcome back to my Garden shop!\r\n                Nice to see you again. </p>\r\n                }\r\n            </Header>\r\n        </Container>\r\n    );\r\n}","import React, { ChangeEvent, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Button, Form, Grid, Header, Message } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { UserDto } from \"../models/user\";\r\nimport { UserContext } from \"./UserProvider\";\r\n\r\nexport default function RegisterForm(){\r\n    const userCtx=React.useContext(UserContext);\r\n    const history = useHistory();\r\n    const initialState= {\r\n        UserName: '',\r\n        Email: '',\r\n        Password: ''\r\n    }\r\n    const [user, setUser]=useState(initialState);\r\n    const [submiting, setSubmiting]=useState(false);\r\n    const [error, setError]=useState(\"\");\r\n    function handleInputChange(event: ChangeEvent<HTMLInputElement>){\r\n        const {name, value}=event.target;\r\n        setUser({...user, [name]: value})\r\n    }\r\n    function handleSubmit(){\r\n        setSubmiting(true);\r\n        register(user);\r\n    }\r\n\r\n    async function register(user: UserDto){\r\n        try {\r\n        const appUser = await api.Account.register(user)\r\n          console.log(appUser);\r\n          userCtx.setUser(appUser);\r\n          userCtx.setToken(appUser?.Token);\r\n          setSubmiting(false);\r\n          history.push('/');\r\n        } catch(err: any){\r\n            console.log(err);\r\n            setError(err.Message);\r\n            setSubmiting(false);\r\n        };\r\n           \r\n      }\r\n\r\n    function closeForm(){\r\n        history.push('/');\r\n    }\r\n      \r\n    return(\r\n        <>\r\n        <Grid centered columns={2}>\r\n            <Grid.Column>\r\n                <Header as='h2'>Register</Header>\r\n                <Form onSubmit={handleSubmit} error={error?true:false}>\r\n                    <Form.Input required placeholder='User Name' value={user.UserName || ''} name='UserName' onChange={handleInputChange}/>\r\n                    <Form.Input required placeholder='Email' value={user.Email || ''} name='Email' onChange={handleInputChange}/>\r\n                    <Form.Input required type='password' placeholder='Password' value={user.Password || ''} name='Password' onChange={handleInputChange}/>\r\n                    <Button loading={submiting} positive type='submit'>Register</Button>\r\n                    <Button onClick={closeForm} type='button'>Cancel</Button>\r\n                    <Message\r\n                        error\r\n                        content={error.toString()}\r\n                    />\r\n                </Form>\r\n            </Grid.Column>\r\n        </Grid>\r\n        </>\r\n    );\r\n}","import React, { SyntheticEvent, useEffect, useState } from \"react\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport { Button, Card, Divider, Grid, Header, Icon, Label } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { Product } from \"../models/product\";\r\nimport { SalesDetail } from \"../models/salesdetail\";\r\nimport { CartContext } from \"./CartProvider\";\r\nimport { UserContext } from \"./UserProvider\";\r\n\r\nexport default function ProductList() {\r\n    const userCtx=React.useContext(UserContext);\r\n    const cartCtx=React.useContext(CartContext);\r\n    const [target, setTarget] = useState('');\r\n    const [selectedProduct, setSelectedProduct]=useState<Product|undefined>(undefined);\r\n    const [submiting, setSubmiting]=useState(false);\r\n    const newSalesDetail={\r\n        SalesDetailId: '',\r\n        SaleId: '',\r\n        Seq: 0,\r\n        Product: '',\r\n        Quantity: 0,\r\n        UnitPrice: 0,\r\n        LineTotal: 0,\r\n    }\r\n\r\n    // useEffect(()=>{\r\n    //     if(userCtx.user) {\r\n    //         cartCtx.fillUserSales();\r\n    //         cartCtx.fillCartProducts();\r\n    //         cartCtx.fillUserSalesDetails();\r\n    //         cartCtx.fillActiveSalesDetails();\r\n    //       }\r\n    // }, [])\r\n\r\n    function handleDeleteProduct(e: SyntheticEvent<HTMLButtonElement>, id:string){\r\n        setTarget(e.currentTarget.name);\r\n        setSubmiting(true);\r\n        api.Products.delete(id).then(()=>{\r\n        cartCtx.setProducts([...cartCtx.products.filter(s=>s.ProductId !== id)]);\r\n        setSubmiting(false);\r\n        });\r\n    }\r\n    function handleAddToCart(e: SyntheticEvent<HTMLButtonElement>, product:Product){\r\n        setTarget(e.currentTarget.name);\r\n        setSubmiting(true);\r\n        setSelectedProduct(product);\r\n        const activeSalesDetails = cartCtx.activeSalesDetails;\r\n        if(activeSalesDetails !==[] \r\n            && activeSalesDetails.some(d=>d.Product === product.ProductId)){\r\n            const tempSalesDetail = activeSalesDetails.find(d=>d.Product === product.ProductId);\r\n            if(tempSalesDetail!==undefined && tempSalesDetail.UnitPrice!==null){\r\n                tempSalesDetail.Quantity+=1;\r\n                tempSalesDetail.LineTotal+=tempSalesDetail.UnitPrice ? tempSalesDetail.UnitPrice : 0;\r\n                updateSalesDetail(tempSalesDetail);\r\n                cartCtx.setActiveSalesDetails([...activeSalesDetails.filter(d => d.SalesDetailId !== tempSalesDetail.SalesDetailId), tempSalesDetail]);\r\n            }\r\n        } else { \r\n            const tempSalesDetail = newSalesDetail; \r\n            tempSalesDetail.SaleId = (cartCtx.activeSale !== null ? cartCtx.activeSale.SaleId : '');\r\n            tempSalesDetail.Product = product.ProductId;\r\n            tempSalesDetail.UnitPrice = product.UnitPrice ? product.UnitPrice : 0;\r\n            tempSalesDetail.Quantity = 1;\r\n            tempSalesDetail.LineTotal = product.UnitPrice ? product.UnitPrice : 0;\r\n            addSalesDetail(tempSalesDetail);\r\n        }\r\n        setSubmiting(false);\r\n    }\r\n    function addSalesDetail(salesDetail: SalesDetail){\r\n        api.SalesDetails.create(salesDetail).then(response => {\r\n            if(response!==null) cartCtx.setActiveSalesDetails([...cartCtx.activeSalesDetails, response]);\r\n        }).catch((err)=>{\r\n            console.log(err);\r\n        });\r\n        return \r\n    }\r\n    function updateSalesDetail(salesDetail: SalesDetail){\r\n        return api.SalesDetails.update(salesDetail)\r\n    }\r\n      \r\n    return(\r\n        <>\r\n            <Header as='h1'>Our products</Header>\r\n            <Card.Group>\r\n                {cartCtx.products.map(product => (\r\n                    <Card key={product.ProductId}>\r\n                    <Card.Content>\r\n                        {/* <Image\r\n                        floated='right'\r\n                        size='mini'\r\n                        src='https://react.semantic-ui.com/images/avatar/large/steve.jpg'\r\n                        /> */}\r\n                        <Card.Header>{product.ProductName}</Card.Header>\r\n                        <Card.Meta>\r\n                            <p>Barcode: {product.Barcode}</p>\r\n                            <p>Price: {product.UnitPrice}&euro; per {product.QuantityPerUnit} {product.UnitMeasure}</p>\r\n                        </Card.Meta>\r\n                        <Card.Description>\r\n                        <p>The product is <strong>{product.Discontinued ? \"discontinued\" : \"available\" }</strong></p>\r\n                            <Grid>\r\n                                <Grid.Column floated='left' width={8}>\r\n                                    <Label>{cartCtx.families.find(f=>f.FamilyId === product.FamilyId)?.FamilyName}</Label>\r\n                                </Grid.Column>\r\n                                <Grid.Column floated='right' width={7}>\r\n                                    {cartCtx.activeSalesDetails.some(d=>d.Product === product.ProductId)?\r\n                                    <Label color='orange'>In cart: {cartCtx.activeSalesDetails.find(d=>d.Product === product.ProductId)?.Quantity} {product.UnitMeasure}</Label>\r\n                                    :<></>\r\n                                    }\r\n                                </Grid.Column>\r\n                            </Grid>\r\n                        </Card.Description>\r\n                    </Card.Content>\r\n                    <Card.Content extra>\r\n                        {userCtx.userRoles.some((r)=>r.Name === \"admin\")?\r\n                            <div className='ui three buttons'>\r\n                            <Button color='yellow'>\r\n                                View Stocks\r\n                            </Button>\r\n                            <Button as={Link} to={`/editproduct/${product.ProductId}`} color='green'>\r\n                                Edit\r\n                            </Button>\r\n                            <Button name={product.ProductId} loading={submiting && target === product.ProductId} onClick={(e)=>handleDeleteProduct(e,product.ProductId)} color='red'>\r\n                                Delete\r\n                            </Button>\r\n                            </div>:\r\n                            <div className='ui two buttons'>\r\n                            <Button color='yellow'>\r\n                                View Stocks\r\n                            </Button>\r\n                            {(userCtx.user != null)?\r\n                            <Button disabled={product.Discontinued} name={product.ProductId} loading={submiting && target === product.ProductId} onClick={(e)=>handleAddToCart(e, product)} color={product.Discontinued?'grey':'green'}>\r\n                                Add to cart\r\n                            </Button>:\r\n                            <Button as={NavLink} to='/login' name='Login' color='green'>\r\n                                Please login\r\n                            </Button>\r\n                            }\r\n                            </div>\r\n                        }\r\n                    </Card.Content>\r\n                    </Card>\r\n                ))}\r\n            </Card.Group>\r\n            {userCtx.userRoles.some((r)=>r.Name === \"admin\")?\r\n            <>\r\n            <Divider horizontal>\r\n                <Header as='h4'>\r\n                    <Icon name='edit outline' />\r\n                    New Product\r\n                </Header>\r\n            </Divider>\r\n            <Card.Group centered>\r\n                <Button as={NavLink} to='/newproduct' positive content='Create Product'/>\r\n            </Card.Group>\r\n            </>:<></>\r\n            }\r\n        </>\r\n)}","import React, { ChangeEvent, useEffect, useState } from \"react\";\r\nimport { Button, Form, Grid, Input, Segment } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { Family } from \"../models/family\";\r\n\r\ninterface Props{\r\n    currentFamily: Family,\r\n    setCurrentFamily: (family: Family)=>void\r\n}\r\n\r\nexport default function FamilySelect({currentFamily, setCurrentFamily}: Props){\r\n    const [families, setFamilies]=useState<Family[]>([]);\r\n    useEffect(() => {\r\n        api.Families.list().then(response => {\r\n          console.log(response);\r\n          setFamilies(response);\r\n        })\r\n      }, [])\r\n\r\n    useEffect(()=>{\r\n        const family = families.find(f=>f.FamilyName === currentFamily.FamilyName);\r\n        console.log('finded family: '+family);\r\n        if (family !== undefined && family.FamilyId !== currentFamily.FamilyId){\r\n            setCurrentFamily(family);\r\n        } \r\n    }, [families, currentFamily])\r\n\r\n    const [familyToAdd, setFamilyToAdd]=useState<string>('');\r\n\r\n    const [submiting, setSubmiting]=useState(false);\r\n    \r\n    function addFamily(family: string){\r\n        if(families !== [] && families.some(f=>f.FamilyName === family)){\r\n            console.log(`Family ${family} already exist`);\r\n        } else {\r\n            api.Families.create({FamilyId: '', FamilyName: family, Products: []}).then(response => {\r\n                if(response!==null) {\r\n                    setCurrentFamily(response);\r\n                    setFamilies([...families, response]);\r\n                }\r\n            }).catch((err)=>{\r\n                console.log(err);\r\n            });\r\n        }\r\n    }\r\n\r\n    function handleSelectChange(event: ChangeEvent<HTMLSelectElement>){\r\n        const {value}=event.target;\r\n        const family = families.find(f=>f.FamilyName === value);\r\n        console.log(family?.FamilyName + ' Selected');\r\n        if(family !== undefined) {\r\n            setCurrentFamily(family);\r\n        };\r\n    }\r\n\r\n    function handleAddFamily(event: ChangeEvent<HTMLInputElement>){\r\n        const {value}=event.target;\r\n        setFamilyToAdd(value);   \r\n    }\r\n\r\n    function createFamily(){\r\n        setSubmiting(true);\r\n        addFamily(familyToAdd);\r\n        setSubmiting(false);\r\n    }\r\n\r\n    return(\r\n        <>\r\n        <Form.Field label='Family of the product' control='select' value={currentFamily.FamilyName || ''} onChange={handleSelectChange}>\r\n            {families.map(family => (\r\n                <option key={family.FamilyId} value={family.FamilyName}>{family.FamilyName}</option>\r\n            ))}\r\n        </Form.Field>\r\n            <Segment>\r\n                <Input placeholder='Add Family' name='Family' value={familyToAdd || ''} onChange={handleAddFamily}/>\r\n                <Button loading={submiting} onClick={createFamily} type='button'>Create family</Button>\r\n            </Segment>\r\n        </>\r\n    );\r\n}","import React, { ChangeEvent, useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router\";\r\nimport { Button, Form, Grid, Header } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { Family } from \"../models/family\";\r\nimport { Product } from \"../models/product\";\r\nimport FamilySelect from \"./FamilySelect\";\r\n\r\nexport default function ProductForm(){\r\n    const history = useHistory();\r\n    const {id} = useParams<{id: string}>();\r\n    const initialState={\r\n        ProductId: '',\r\n        Barcode: '',\r\n        ProductName: '',\r\n        FamilyId: '',\r\n        UnitMeasure: 'piece',\r\n        QuantityPerUnit: 1,\r\n        UnitPrice: null,\r\n        Discontinued: false,\r\n        Stocks: []\r\n    }\r\n    const [product, setProduct]=useState<Product>(initialState);\r\n    const defaultFamily = {\r\n        FamilyId: \"\",\r\n        FamilyName: \"unknown\",\r\n        Products: []\r\n    }\r\n    const [currentFamily, setCurrentFamily]=useState<Family>(defaultFamily);\r\n    const [submiting, setSubmiting]=useState(false);\r\n    useEffect(()=>{\r\n        if(id){\r\n            api.Products.details(id).then(response => {\r\n                if(response!==null) setProduct(response);\r\n            }).catch((err)=>{\r\n                console.log(err);\r\n            });\r\n        };\r\n    }, [id])\r\n    useEffect(()=>{\r\n        if(product.FamilyId !== currentFamily.FamilyId && currentFamily.FamilyId !== ''){\r\n            setProduct({...product, FamilyId: currentFamily.FamilyId});\r\n        }\r\n    }, [currentFamily])\r\n\r\n    function handleSubmit(){\r\n        editProduct(product);\r\n    }\r\n    function handleInputChange(event: ChangeEvent<HTMLInputElement>){\r\n        const {name, value}=event.target;\r\n        setProduct({...product, [name]: value});\r\n    }\r\n    function toggleDiscontinued(){\r\n        setProduct({...product, Discontinued: !product.Discontinued});\r\n    }\r\n    function editProduct(product: Product){\r\n        setSubmiting(true);\r\n        if (product.ProductId){\r\n          api.Products.update(product).then(()=>{\r\n            history.push('/product');\r\n          })\r\n        } else {\r\n          api.Products.create(product).then(()=>{\r\n            history.push('/product');\r\n          })\r\n        }\r\n        setProduct(product);\r\n        setSubmiting(false);   \r\n    }\r\n    function closeForm(){\r\n        history.push('/product');\r\n    }\r\n    return(\r\n        <>\r\n            <Grid centered columns={2}>\r\n                <Grid.Column>\r\n                    <Header as='h2'>{id?'Edit':'New'} product</Header>\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Input required placeholder='Product Name' value={product.ProductName || ''} name='ProductName' onChange={handleInputChange}/>\r\n                        <Form.Input placeholder='Barcode' value={product.Barcode || ''} name='Barcode' onChange={handleInputChange}/>\r\n                        <Form.Input placeholder='Product Price' value={product.UnitPrice || ''} name='UnitPrice' onChange={handleInputChange}/>\r\n                        <Form.Input placeholder='Unit Measure' value={product.UnitMeasure || ''} name='UnitMeasure' onChange={handleInputChange}/>\r\n                        <Form.Input placeholder='Quantity per Unit' value={product.QuantityPerUnit || ''} name='QuantityPerUnit' onChange={handleInputChange}/>\r\n                        <Form.Checkbox label='Discontinued' checked={product.Discontinued || false} name='Discontinued' onChange={toggleDiscontinued}/>\r\n                        <FamilySelect setCurrentFamily={setCurrentFamily} currentFamily={currentFamily}/>\r\n                        <Button loading={submiting} positive type='submit'>Submit</Button>\r\n                        <Button onClick={closeForm} type='button'>Cancel</Button>\r\n                    </Form>\r\n                </Grid.Column>\r\n            </Grid>\r\n        </>\r\n    )\r\n}","import React, { ChangeEvent, MouseEvent, useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router\";\r\nimport { Button, Form, Grid, Header, Image, Input, Label, Message, Segment } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { Photo } from \"../models/photo\";\r\nimport { Role, User } from \"../models/user\";\r\nimport { UserContext } from \"./UserProvider\";\r\n\r\nexport default function UserForm(){\r\n    const userCtx=React.useContext(UserContext);\r\n    const {userRoles, setUserRoles, roles, setRoles}=userCtx;\r\n    const history = useHistory();\r\n    const {id} = useParams<{id: string}>();\r\n    const initialState={\r\n        Id: '',\r\n        UserName: '',\r\n        Email: '',\r\n        PhoneNumber: '',\r\n        Address: '',\r\n        City: '',\r\n        Token: '',\r\n        Sales: [],\r\n        Photos: [],\r\n        Roles: []\r\n    }\r\n    const [user, setUser]=useState<User>(initialState);\r\n    const [submiting, setSubmiting]=useState(false);\r\n    const [error, setError]=useState(\"\");\r\n    useEffect(()=>{\r\n        if(id){\r\n            api.Users.details(id).then(response => {\r\n                if(response!==null) setUser(response);\r\n            }).catch((err)=>{\r\n                console.log(err);\r\n                setError(err);\r\n            });\r\n        };\r\n    }, [id])\r\n    const newRole={\r\n        Id: '',\r\n        Name: ''\r\n    }\r\n    const [role, setRole]=useState<Role>(newRole);\r\n    const [selectedFile, setSelectedFile]=useState<Blob | null>(null)\r\n    const [userPhotos, setUserPhotos] = useState<Photo[]>([]);\r\n\r\n    useEffect(()=>{\r\n        const uPhotos: Photo[] = []\r\n        user?.Photos.map(p=>{\r\n            const photo = userCtx.photos.find(x=>x.Id === p.Id);\r\n            if(photo !== undefined && !userPhotos.some(x=>x.Id === p.Id)) {\r\n                uPhotos.push(photo);\r\n            }\r\n        });\r\n        setUserPhotos(uPhotos);\r\n    }, [user, userCtx.photos])\r\n\r\n    function handleSubmit(){\r\n        editUser(user);\r\n    }\r\n\r\n    function handleInputChange(event: ChangeEvent<HTMLInputElement>){\r\n        const {name, value}=event.target;\r\n        setUser({...user, [name]: value})\r\n    }\r\n    \r\n    function editUser(user: User){\r\n        setSubmiting(true);\r\n        if (user.Id){\r\n          api.Users.update(user).then(()=>{\r\n            history.push('/');\r\n          })\r\n        } else {\r\n          api.Users.create(user).then(()=>{\r\n            history.push('/');\r\n          })\r\n        }\r\n        setUser(user);\r\n        setSubmiting(false);   \r\n    }\r\n\r\n    function closeForm(){\r\n        history.push('/');\r\n    }\r\n\r\n    function handleAddRole(event: ChangeEvent<HTMLInputElement>){\r\n        const {value}=event.target;\r\n        setRole({Id: '', Name: value});   \r\n    }\r\n\r\n    function createRole(){\r\n        if(role.Id === \"\" && !roles.some(r=>r.Name === role.Name)){\r\n            setSubmiting(true);\r\n            api.Roles.create({Name: role.Name}).then(response => {\r\n                if(response!==null) setRole(response);\r\n            }).catch((err)=>{\r\n                console.log(err);\r\n                setError(err);\r\n            });\r\n            setSubmiting(false);\r\n        } \r\n    }\r\n\r\n    function addRole(event: MouseEvent){\r\n        console.log(event);\r\n        const target=event.target as HTMLButtonElement;\r\n        if(target.value!=='' && !userRoles.some(r=>r.Name === target.value)){\r\n            const roleFromEvent = {Id: target.id, Name: target.value};\r\n            setRole(roleFromEvent);\r\n            setUser({...user, Roles: [...user.Roles, roleFromEvent.Id]});\r\n            api.Roles.addrole(user.Id, roleFromEvent).then(response => {\r\n                if(response!==null) setUser(response);\r\n            }).catch((err)=>{\r\n                console.log(err);\r\n                setError(err);\r\n            });\r\n        }\r\n    }\r\n\r\n    function removeRole(event: MouseEvent){\r\n        console.log(event);\r\n        const target=event.target as HTMLButtonElement;\r\n        if(target.value!=='' && userRoles.some(r=>r.Name === target.value)){\r\n            setRole(newRole);\r\n            setUser({...user, Roles: [...user.Roles.filter(r=>r !== target.id)]});\r\n        }\r\n    }\r\n\r\n    function handleAddFile(event: any){\r\n        setSelectedFile(event.target.files[0]);\r\n    }\r\n\r\n    function handleUploadFile(){\r\n        if (selectedFile !== null){\r\n            uploadPhoto(selectedFile);\r\n            setSelectedFile(null);\r\n        }\r\n    }\r\n\r\n    function setMainImage(id: string){\r\n        const oldPhoto = user.Photos.find(p => p.IsMain);\r\n        const newPhoto = user.Photos.find(p => p.Id === id);\r\n        if (oldPhoto && newPhoto){\r\n            oldPhoto.IsMain = false;\r\n            newPhoto.IsMain = true;\r\n            if (oldPhoto.Id !== null){\r\n                updatePhoto(oldPhoto);\r\n            }\r\n            updatePhoto(newPhoto);\r\n        }\r\n    }\r\n\r\n    function updatePhoto(photo: Photo){\r\n        try {\r\n            api.Images.update(photo)\r\n            .then((response)=>{\r\n                if(response!==null){\r\n                    const newUser = user\r\n                    newUser.Photos = user.Photos.filter(p => p.Id === photo.Id || p.Id === null);\r\n                    newUser.Photos.push(response);\r\n                    setUser(newUser);\r\n                    setUserPhotos([...userPhotos.filter(p => p.Id === photo.Id || p.Id === null), response]);\r\n                }\r\n            });\r\n        } catch (error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    async function uploadPhoto (file: Blob) {\r\n        try{\r\n            const response = await api.Images.upload(file);\r\n            const result = response.data;\r\n            const photo = {\r\n                Id: result.PublicId,\r\n                Url: result.Url,\r\n                IsMain: user.Photos.length === 0? true: false,\r\n                UserId: user.Id,\r\n                ProductId: \"\"\r\n            }\r\n            addPhoto(photo);\r\n        } catch (error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    function addPhoto(photo: Photo){\r\n        try {\r\n            api.Images.create(photo)\r\n            .then((response)=>{\r\n                if(response!==null){\r\n                    const newUser = user\r\n                    newUser.Photos.push(response);\r\n                    setUser(newUser);\r\n                    setUserPhotos([...userPhotos, response]);\r\n                }\r\n            });\r\n        } catch (error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    async function deleteImage(id: string){\r\n        try {\r\n            await api.Images.delete(id)\r\n            .then(()=>{\r\n                const newUser = user\r\n                newUser.Photos = user.Photos.filter(p => p.Id !== id);\r\n                setUser(newUser);\r\n                setUserPhotos(userPhotos.filter(p => p.Id !== id));\r\n            });\r\n        } catch (error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <Grid centered columns={2}>\r\n                <Grid.Column>\r\n                    <Header as='h2'>Edit user \"{user.UserName}\"</Header>\r\n                    <Segment.Group>\r\n                    <Form onSubmit={handleSubmit} error={error?true:false}>\r\n                        <Segment>\r\n                            <Form.Input required placeholder='User Name' value={user.UserName || ''} name='UserName' onChange={handleInputChange}/>\r\n                            <Form.Input required placeholder='Email' value={user.Email || ''} name='Email' onChange={handleInputChange}/>\r\n                            <Form.Input placeholder='Phone Number' value={user.PhoneNumber || ''} name='PhoneNumber' onChange={handleInputChange}/>\r\n                            <Form.Input placeholder='Address' value={user.Address || ''} name='Address' onChange={handleInputChange}/>\r\n                            <Form.Input placeholder='City' value={user.City || ''} name='City' onChange={handleInputChange}/>\r\n                        </Segment>\r\n                        <Segment>\r\n                            <Grid>\r\n                                <Grid.Row>\r\n                                    <Grid.Column width={8}>\r\n                                        <Header as='h4'>Roles of \"{user.UserName}\":\r\n                                            <Header.Subheader>Click to remove ...</Header.Subheader>\r\n                                        </Header>\r\n                                    </Grid.Column>\r\n                                    <Grid.Column width={8}>\r\n                                        {userRoles.map(r => (\r\n                                            <Button size='mini' type='button' onClick={removeRole} id={r.Id} value={r.Name} key={r.Id}>{r.Name}</Button>\r\n                                        ))}\r\n                                    </Grid.Column>\r\n                                </Grid.Row>\r\n                                <Grid.Row>\r\n                                    <Grid.Column width={8}>\r\n                                        <Header as='h4'>Available Roles:\r\n                                            <Header.Subheader>Click to add ...</Header.Subheader>\r\n                                        </Header>\r\n                                    </Grid.Column>\r\n                                    <Grid.Column width={8}>\r\n                                        {roles.map(r => (\r\n                                            <Button size='mini' type='button' onClick={addRole} id={r.Id} value={r.Name} key={r.Id}>{r.Name}</Button>\r\n                                        ))}\r\n                                    </Grid.Column>\r\n                                </Grid.Row>\r\n                                <Grid.Row>\r\n                                    <Grid.Column width={16}>\r\n                                        <Input placeholder='Add Role' name='Role' value={role.Name || ''} onChange={handleAddRole}/>\r\n                                        <Button loading={submiting} onClick={createRole} type='button'>Create role</Button>\r\n                                    </Grid.Column>\r\n                                </Grid.Row>\r\n                            </Grid>\r\n                        </Segment>\r\n                        <Segment>\r\n                            <Button loading={submiting} positive type='submit'>Submit</Button>\r\n                            <Button onClick={closeForm} type='button'>Cancel</Button>\r\n                        </Segment>\r\n                        <Segment>\r\n                            <Header as='h4'>{user.UserName}'s images: </Header>\r\n                            <Image.Group size='small'>\r\n                                {userPhotos.map(p => \r\n                                <div key={p.Id} className='image_container'>\r\n                                    <Image src={p.Url} rounded/>\r\n                                    {p.IsMain? \r\n                                        <Label className='image_label' color='green'>Main photo</Label>:\r\n                                        <Button loading={submiting} onClick={()=>setMainImage(p.Id)} type='button' className='image_label'>Set as Main</Button>}\r\n                                        <Button loading={submiting} onClick={()=>deleteImage(p.Id)} type='button' className='image_delete' color='orange'>Delete</Button>\r\n                                </div>)}\r\n                            </Image.Group>\r\n                            <Header as='h4'>Choose photo to upload: </Header>\r\n                            <Input type='file' name='file' onChange={handleAddFile}/>\r\n                            <Button disabled={selectedFile === null} onClick={handleUploadFile} type='button' style={{marginTop:'1em'}}>Upload photo</Button>\r\n                        </Segment>\r\n                        <Message error content={error.toString()}/>\r\n                    </Form>\r\n                    </Segment.Group>\r\n                </Grid.Column>\r\n            </Grid>\r\n        </>\r\n    );\r\n}","import React, { useState, MouseEvent, useEffect } from \"react\";\r\nimport { Header, Grid, Label, Segment, Button, Card } from \"semantic-ui-react\";\r\nimport api from \"../app/api\";\r\nimport { SalesDetail } from \"../models/salesdetail\";\r\nimport { CartContext } from \"./CartProvider\";\r\nimport { UserContext } from \"./UserProvider\";\r\n\r\nexport default function CartList(){\r\n    const cartCtx=React.useContext(CartContext);\r\n    const userCtx=React.useContext(UserContext);\r\n    const [submiting, setSubmiting]=useState(false);\r\n    const [totalProducts, setTotalProducts]=useState<number>(0);\r\n    const [totalPrice, setTotalPrice]=useState<number>(0);\r\n    // useEffect(()=>{\r\n    //     cartCtx.fillUserSales();\r\n    // }, [userCtx.user])\r\n\r\n    // useEffect(()=>{\r\n    //     cartCtx.fillCartProducts();\r\n    //     cartCtx.fillActiveSalesDetails();\r\n    // }, [cartCtx.activeSale])\r\n\r\n    // useEffect(()=>{\r\n    //     cartCtx.fillUserSalesDetails();        \r\n    // }, [cartCtx.userSales])\r\n\r\n\r\n    useEffect(()=>{\r\n        let price = 0;\r\n        cartCtx.activeSalesDetails.map(d=>{\r\n            price += d.LineTotal;\r\n        });\r\n        setTotalPrice(price);\r\n        setTotalProducts(cartCtx.cartProducts.length);\r\n    }, [cartCtx.activeSalesDetails, cartCtx.cartProducts])\r\n\r\n    function addProduct(event: MouseEvent){\r\n        const target=event.target as HTMLButtonElement;\r\n        const activeSalesDetails = cartCtx.activeSalesDetails;\r\n        const salesDetail = activeSalesDetails.find(d=>d.Product === target.value);\r\n        if(salesDetail !== undefined && salesDetail.UnitPrice !== 0){\r\n            salesDetail.Quantity += 1;\r\n            salesDetail.LineTotal += salesDetail.UnitPrice;\r\n            updateSalesDetail(salesDetail);\r\n            cartCtx.setActiveSalesDetails([...activeSalesDetails.filter(d => d.SalesDetailId !== salesDetail?.SalesDetailId), salesDetail]);\r\n            setSubmiting(false);\r\n        }\r\n    }\r\n\r\n    function removeProduct(event: MouseEvent){\r\n        const target=event.target as HTMLButtonElement;\r\n        const activeSalesDetails = cartCtx.activeSalesDetails;\r\n        const salesDetail = activeSalesDetails.find(d=>d.Product === target.value);\r\n        if(salesDetail !== undefined && salesDetail.UnitPrice !== 0 && salesDetail.Quantity > 0){\r\n            salesDetail.Quantity -= 1;\r\n            salesDetail.LineTotal -= salesDetail.UnitPrice;\r\n            updateSalesDetail(salesDetail);\r\n            cartCtx.setActiveSalesDetails([...activeSalesDetails.filter(d => d.SalesDetailId !== salesDetail?.SalesDetailId), salesDetail]);\r\n            setSubmiting(false);\r\n        }\r\n    }\r\n\r\n    function updateSalesDetail(salesDetail: SalesDetail){\r\n        setSubmiting(true);\r\n        return api.SalesDetails.update(salesDetail)\r\n    }\r\n\r\n    return(\r\n        <>\r\n        {totalProducts>0?\r\n        <>\r\n        <Header as='h1'>Your Cart</Header>\r\n        <Grid >\r\n            <Grid.Column width={10}>\r\n                    {cartCtx.cartProducts.map(product=>{\r\n                        return(\r\n                            <Card key={product.ProductId} fluid>\r\n                                <Card.Content>\r\n                                <Card.Header as='h2'>{product.ProductName}</Card.Header>\r\n                                <Card.Meta>    <p>Barcode: {product.Barcode}</p></Card.Meta>\r\n                                <Card.Description>\r\n                                    <Grid>\r\n                                        <Grid.Column floated='left' width={10}>\r\n                                            <p>Price: {product.UnitPrice}&euro; per {product.QuantityPerUnit} {product.UnitMeasure}</p>\r\n                                        </Grid.Column>\r\n                                        <Grid.Column floated='right' width={6}>\r\n                                            <strong>Total: {cartCtx.activeSalesDetails?.find(d=>d.Product === product.ProductId)?.LineTotal}&euro; </strong>\r\n                                        </Grid.Column>\r\n                                    </Grid>\r\n                                        <Label>{cartCtx.families.find(f=>f.FamilyId === product.FamilyId)?.FamilyName}</Label>\r\n                                        <Button.Group size='large' floated='right'>\r\n                                            <Button loading={submiting} negative onClick={removeProduct} type='button' value={product.ProductId}>-</Button>\r\n                                            <Button >{cartCtx.activeSalesDetails.find(d=>d.Product === product.ProductId)?.Quantity} {product.UnitMeasure}</Button>\r\n                                            <Button loading={submiting} positive onClick={addProduct} type='button' value={product.ProductId}>+</Button>\r\n                                        </Button.Group>\r\n                                </Card.Description>\r\n                                </Card.Content>\r\n                            </Card>\r\n                    )})}\r\n            </Grid.Column>\r\n            <Grid.Column width={6}>\r\n                <Segment>\r\n                    <Header as='h2'>Total:</Header>\r\n                    <p>{totalProducts} units for {totalPrice}&euro;</p>\r\n                </Segment>\r\n            </Grid.Column>\r\n        </Grid>\r\n        </>:\r\n        <Header as='h1'>Your Cart is empty</Header>}\r\n        </>\r\n    );\r\n}","import React, {useEffect, useState} from 'react';\r\nimport { Container } from 'semantic-ui-react';\r\nimport NavBar from './NavBar';\r\nimport Loading from '../components/loading';\r\nimport StoreList from '../components/StoreList';\r\nimport StoreForm from '../components/StoreForm';\r\nimport LoginForm from '../components/LoginForm';\r\nimport { Route } from 'react-router';\r\nimport HomePage from '../components/HomePage';\r\nimport RegisterForm from '../components/RegisterForm';\r\nimport ProductList from '../components/ProductList';\r\nimport ProductForm from '../components/ProductForm';\r\nimport { UserContext } from '../components/UserProvider';\r\nimport UserForm from '../components/UserForm';\r\nimport { useHistory } from 'react-router-dom';\r\nimport CartList from '../components/CartList';\r\nimport { CartContext } from '../components/CartProvider';\r\n\r\nfunction App() {\r\n  const userCtx=React.useContext(UserContext);\r\n  const cartCtx=React.useContext(CartContext);\r\n  const history = useHistory();\r\n  const [loading, setLoading]=useState(true);\r\n\r\n  useEffect(()=>{\r\n    if(userCtx.userToken){\r\n      console.log('the token: ' + userCtx.userToken);\r\n      userCtx.getCurrentUser();\r\n      if(userCtx.user) {\r\n        cartCtx.fillUserSales();\r\n        cartCtx.fillCartProducts();\r\n        cartCtx.fillUserSalesDetails();\r\n        cartCtx.fillActiveSalesDetails();\r\n      }\r\n      setLoading(false);\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [])\r\n\r\n  function handleLogout(){\r\n//    api.Account.logout().then(()=>{\r\n      userCtx.setUser(null);\r\n      cartCtx.clearCart();\r\n      window.localStorage.removeItem('jwt');\r\n      console.log('Successfully loged out');\r\n//     })\r\n//    setActiveItem('home');\r\n      history.push('/');\r\n  }\r\n\r\n  if (loading) return <Loading content='Loading App ...'/>\r\n  return (\r\n    <div className=\"App\">\r\n        <NavBar logout={handleLogout}/>\r\n        <Container style={{marginTop:'5em'}}>\r\n          <Route exact path='/' component={HomePage}/>\r\n          <Route path='/store' component={StoreList}/>\r\n          <Route path={['/newstore', '/editstore/:id']} component={StoreForm}/>\r\n          <Route path='/product' component={ProductList}/>\r\n          <Route path={['/newproduct', '/editproduct/:id']} component={ProductForm}/>\r\n          <Route path={['/newuser', '/edituser/:id']} component={UserForm}/>\r\n          <Route path={'/cartlist/:id'} component={CartList}/>\r\n          <Route path='/login' component={LoginForm}/>\r\n          <Route path='/register' component={RegisterForm}/>\r\n        </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport './app/style.css';\r\nimport App from './app/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport UserProvider from './components/UserProvider';\r\nimport CartProvider from './components/CartProvider';\r\n\r\nReactDOM.render(\r\n  <UserProvider>\r\n    <CartProvider>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </CartProvider>\r\n  </UserProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}